<!doctype html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>CIT 261 Fluency Evidence | J. Sterling Wright | BYU-Idaho</title>
        <meta name="description" content="Topic fluency page for Sterling Wright in CIT 261: Mobile Application Development at BYU-Idaho">
        <link rel="stylesheet" href="styles/normalize.css">
        <link rel="stylesheet" href="styles/main.css">
    </head>
    <body>
        <header>
        </header>
        <nav>
            <!--There will eventually be a navigation menu here -->
        </nav>
        <main>
            <h2>CIT 261 - Fluency Evidence - AJAX</h2>
            <pre>
                <code>
weatherRequest = new XMLHttpRequest();
apiURL = "https://api.openweathermap.org/data/2.5/forecast?
    id=4684888&units=imperial&APPID=123e236852641b9b3bfd755ffa553566";
weatherRequest.open("GET",apiURL,true);
weatherRequest.send();
weatherRequest.onload =  function () {
    let weatherData = JSON.parse(weatherRequest.responseText);
    console.log(weatherData);
    let dallasWeather = {"current-temp":weatherData.list[0].main.temp, 
        "current-description":weatherData.list[0].weather[0].main, 
        "high-temp":weatherData.list[0].main.temp_max, 
        "low-temp":weatherData.list[0].main.temp_min, 
        "wind-speed":weatherData.list[0].wind.speed, 
        "weather-icon":weatherData.list[0].weather[0].icon};
    console.log(dallasWeather);
    document.getElementById("dallas-temp").innerHTML = dallasWeather["current-temp"];
    document.getElementById("dallas-low").innerHTML = dallasWeather["low-temp"];
    document.getElementById("dallas-high").innerHTML = dallasWeather["high-temp"];
    document.getElementById("dallas-wind").innerHTML = dallasWeather["wind-speed"];
    document.getElementById("dallas-icon").src = 'https://openweathermap.org/img/w/' 
        + dallasWeather["weather-icon"]+'.png';
}
                </code>
            </pre>
            <h2>Weather in Dallas</h2>
            <section class="weather-summary">
              <h3>Current Weather</h3>    
              <div class="current">
                <p><span id="dallas-current"></span></p>
                <picture>
                    <img id="dallas-icon" src="#" width="150" height="150" alt="current">
                </picture>
              </div>   
              <div class="conditions">
                <p>Temperature: <span id="dallas-temp"></span>&deg;</p>
                <p>Low: <span id="dallas-low"></span>&deg;</p>  
                <p>High: <span id="dallas-high"></span>&deg;</p>  
                <p>Wind Speed: <span id="dallas-wind"></span> mph</p>
              </div>
            </section>
            Weather provided by <a href="https://openweathermap.org/city/4684888/"
                                   target="_blank">OpenWeatherMap</a>
        </main>
        <footer>
            &copy;2019 J. Sterling Wright, Virgina - 
            <a href="http://www.byui.edu/online">BYU-Idaho Online Learning</a>
        </footer>
        <script src="ajax.js"></script>
    </body>
</html>